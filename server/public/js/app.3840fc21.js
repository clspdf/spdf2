(function(e){function t(t){for(var r,s,i=t[0],c=t[1],l=t[2],d=0,v=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&v.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(v.length)v.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("router-view")],1)},a=[],s={name:"App",components:{},data:function(){return{}}},i=s,c=n("2877"),l=n("6544"),u=n.n(l),d=n("7496"),v=Object(c["a"])(i,o,a,!1,null,null,null),f=v.exports;u()(v,{VApp:d["a"]});n("b0c0"),n("96cf");var p=n("1da1"),g=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"grey lighten-5",attrs:{fluid:""}},[n("Navbar",{attrs:{title:this.$options.name.toUpperCase()}}),n("v-container",{staticClass:"grey lighten-5",attrs:{fluid:""}},[n("v-row",{attrs:{justify:"space-around"}},[n("v-form",[n("v-text-field",{attrs:{label:"Name"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),n("v-text-field",{attrs:{label:"Password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),n("v-btn",{attrs:{color:"success"},on:{click:e.login}},[e._v("Login In")]),n("v-btn",{attrs:{"router-link":"",to:"/Todos"}},[e._v("Todos")])],1)],1)],1)],1)},m=[],b=n("d4ec"),x=n("bee2"),w=n("7338"),T=n.n(w),y=(n("df7c"),"api/user"),_=function(){function e(){Object(b["a"])(this,e)}return Object(x["a"])(e,null,[{key:"login",value:function(e){return T.a.post(y+"/login",e)}},{key:"checkLogin",value:function(){return T.a.get(y+"/checkuser")}},{key:"logout",value:function(){return T.a.post(y+"/logout")}}]),e}(),k=_,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{attrs:{dense:"",flat:"",color:"primary"}},[n("v-app-bar-nav-icon",{attrs:{color:"white"}}),n("v-toolbar-title",{staticClass:"white--text"},[e._v(e._s(e.title))]),n("v-spacer"),n("v-btn",{staticClass:"mr-2",attrs:{color:"success"}},[e._v("Tool")]),e.isLogin?n("v-btn",{attrs:{color:"white",icon:""},on:{click:e.logout}},[n("v-icon",[e._v("mdi-exit-to-app")])],1):e._e()],1)},j=[],I={name:"Navbar",props:["title","canLogout"],methods:{logout:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.logout();case 2:n=t.sent,n.data?(console.log("server session destroyed"),e.$store.commit("users/setUserID",null),console.log("vuex reset to null"),e.$router.push("/").catch((function(e){console.log("Error found as ".concat(e))}))):console.log("something is wrong");case 4:case"end":return t.stop()}}),t)})))()}},computed:{isLogin:function(){return!!this.$store.getters["users/getUserID"]}}},C=I,D=n("40dc"),V=n("5bc1"),$=n("8336"),R=n("132d"),U=n("2fa4"),N=n("2a7f"),S=Object(c["a"])(C,O,j,!1,null,null,null),L=S.exports;u()(S,{VAppBar:D["a"],VAppBarNavIcon:V["a"],VBtn:$["a"],VIcon:R["a"],VSpacer:U["a"],VToolbarTitle:N["a"]});var A={name:"Login",components:{Navbar:L},data:function(){return{user:{name:"spdf_hash",password:""}}},methods:{login:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.login(e.user);case 2:n=t.sent,n.data?(e.$store.commit("users/setUserID",n.data),console.log("Now the state has been changed to - ".concat(e.$store.getters["users/getUserID"]))):console.log("nil valid ID"),e.user={name:"",password:""},e.$router.push("todos");case 5:case"end":return t.stop()}}),t)})))()}}},P=A,B=n("a523"),E=n("4bd4"),M=n("0fd9"),F=n("8654"),J=Object(c["a"])(P,h,m,!1,null,null,null),z=J.exports;u()(J,{VBtn:$["a"],VContainer:B["a"],VForm:E["a"],VRow:M["a"],VTextField:F["a"]});var K=n("2f62"),q={userID:null};console.log("vuex initialized, userID at ".concat(q.userID));var G={getUserID:function(e){return e.userID}},H={},Q={setUserID:function(e,t){return e.userID=t}},W={namespaced:!0,state:q,getters:G,actions:H,mutations:Q};r["a"].use(K["a"]);var X=new K["a"].Store({state:{},mutations:{},actions:{},modules:{users:W}}),Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"grey lighten-5",attrs:{fluid:""}},[n("Navbar",{attrs:{title:this.$options.name.toUpperCase()}}),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"my-3 ml-5",attrs:{color:"primary white--text"}},r),[e._v(" Add New ")])]}}]),model:{value:e.new_dialog,callback:function(t){e.new_dialog=t},expression:"new_dialog"}},[n("v-card",[n("v-card-title",[e._v(e._s(e.formTitle))]),n("v-card-text",[n("v-text-field",{attrs:{label:"Title"},model:{value:e.editedTodo.title,callback:function(t){e.$set(e.editedTodo,"title",t)},expression:"editedTodo.title"}}),n("v-textarea",{attrs:{"auto-grow":"",label:"Content"},model:{value:e.editedTodo.content,callback:function(t){e.$set(e.editedTodo,"content",t)},expression:"editedTodo.content"}}),n("v-text-field",{attrs:{label:"Status"},model:{value:e.editedTodo.status,callback:function(t){e.$set(e.editedTodo,"status",t)},expression:"editedTodo.status"}}),n("v-text-field",{attrs:{label:"Due By"},model:{value:e.editedTodo.due,callback:function(t){e.$set(e.editedTodo,"due",t)},expression:"editedTodo.due"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"secondary"},on:{click:e.close}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"success",loading:e.loading},on:{click:e.save}},[e._v("OK")])],1)],1)],1),e._l(e.todos,(function(t){return n("v-card",{key:t._id,staticClass:"mx-5"},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12",md:"6"}},[n("div",[n("v-card",{staticClass:"pl-3 font-weight-bold headline d-flex align-end justify-right",attrs:{flat:"",height:"30"}},[e._v(" "+e._s(t.title)+" ")])],1),n("div",[n("v-card",{staticClass:"pl-3 pa-1 font-weight-regular",attrs:{flat:""}},[e._v(" "+e._s(t.content)+" ")])],1)]),n("v-col",{attrs:{cols:"4",md:"2"}},[n("div",[n("v-card",{staticClass:"pl-3 font-weight-bold grey--text d-flex align-end justify-right",attrs:{flat:"",height:"30"}},[e._v(" Due By ")])],1),n("div",[n("v-card",{staticClass:"pl-3 pa-1 font-weight-regular",attrs:{flat:""}},[e._v(" "+e._s(t.due)+" ")])],1)]),n("v-col",{attrs:{cols:"4",md:"2"}},[n("div",[n("v-card",{staticClass:"pl-3 font-weight-bold grey--text d-flex align-end justify-right",attrs:{flat:"",height:"30"}},[e._v(" Created On ")])],1),n("div",[n("v-card",{staticClass:"pl-3 pa-1 font-weight-regular",attrs:{flat:""}},[e._v(" "+e._s(t.created)+" ")])],1)]),n("v-col",{attrs:{cols:"4",md:"2"}},[n("div",[n("v-card",{staticClass:"d-flex justify-end align-end pr-3",attrs:{flat:"",height:"30"}},[n("v-chip",{attrs:{color:"primary",small:""}},[e._v(e._s(t.status))])],1)],1),n("div",[n("v-card",{staticClass:"d-flex justify-end align-end pr-3",attrs:{flat:"",height:"30"}},[n("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(n){return e.editTodo(t)}}},[n("v-icon",[e._v("mdi-pencil")])],1),n("v-btn",{attrs:{icon:"",color:"warning"},on:{click:function(n){return e.deleteTodo(t)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)],1)])],1)],1)}))],2)},Z=[],ee="api/todos",te=function(){function e(){Object(b["a"])(this,e)}return Object(x["a"])(e,null,[{key:"getTodos",value:function(){return T.a.get(ee+"/")}},{key:"createTodo",value:function(e){return T.a.post(ee+"/",{title:e.title,content:e.content,status:e.status,created:e.created,due:e.due})}},{key:"updateTodo",value:function(e,t){return T.a.post(ee+"/"+t,{title:e.title,content:e.content,status:e.status,created:e.created,due:e.due})}},{key:"deleteTodo",value:function(e){return T.a.delete(ee+"/"+e)}}]),e}(),ne=te,re={name:"Todos",components:{Navbar:L},data:function(){return{todos:[],loading:!1,editedIndex:-1,new_dialog:!1,editedTodo:{title:"",content:"",status:"",due:""},blankTodo:{title:"",content:"",status:"",due:""}}},methods:{getAllTodos:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ne.getTodos();case 2:e.todos=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},close:function(){var e=this;this.new_dialog=!1,this.$nextTick((function(){e.editedTodo=Object.assign({},e.blankTodo),e.editedIndex=-1}))},save:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,-1!==e.editedIndex){t.next=17;break}return e.editedTodo.created=(new Date).toLocaleString("en-CN",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),t.prev=3,t.next=6,ne.createTodo(e.editedTodo);case 6:return t.next=8,e.getAllTodos();case 8:e.loading=!1,e.close(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),console.log(t.t0);case 15:t.next=31;break;case 17:return e.editedTodo.created=(new Date).toLocaleString("en-CN",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),t.prev=18,t.next=21,ne.updateTodo(e.editedTodo,e.editedIndex);case 21:return t.sent,t.next=24,e.getAllTodos();case 24:e.loading=!1,e.close(),t.next=31;break;case 28:t.prev=28,t.t1=t["catch"](18),console.log(t.t1);case 31:case"end":return t.stop()}}),t,null,[[3,12],[18,28]])})))()},editTodo:function(e){this.editedIndex=e._id,this.editedTodo=Object.assign({},e),this.new_dialog=!0},deleteTodo:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ne.deleteTodo(e._id);case 2:return n.next=4,t.getAllTodos();case 4:case"end":return n.stop()}}),n)})))()}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ne.getTodos();case 2:e.todos=t.sent.data;case 3:case"end":return t.stop()}}),t)})))()},computed:{formTitle:function(){return-1===this.editedIndex?"New TODO":"Edit TODO"}}},oe=re,ae=n("b0af"),se=n("99d9"),ie=n("cc20"),ce=n("62ad"),le=n("169a"),ue=n("a844"),de=Object(c["a"])(oe,Y,Z,!1,null,null,null),ve=de.exports;u()(de,{VBtn:$["a"],VCard:ae["a"],VCardActions:se["a"],VCardText:se["b"],VCardTitle:se["c"],VChip:ie["a"],VCol:ce["a"],VContainer:B["a"],VDialog:le["a"],VIcon:R["a"],VRow:M["a"],VSpacer:U["a"],VTextField:F["a"],VTextarea:ue["a"]}),r["a"].use(g["a"]);var fe=[{path:"/login",name:"Login",component:z},{path:"/todos",name:"Todos",component:ve}],pe=new g["a"]({mode:"history",base:"/",routes:fe});pe.beforeEach(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n,r){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=X.getters["users/getUserID"],console.log(t.name),console.log("User ID extracted from vuex: ".concat(o)),o){e.next=10;break}return console.log("UserID not in vuex, checking server record...."),e.next=7,k.checkLogin();case 7:a=e.sent.data,console.log("User ID extracted from server record: ".concat(a)),a?(console.log("user ID found on sever side, now updating vuex status..."),X.commit("users/setUserID",a),console.log("Now vuex has the userID of: ".concat(X.getters["users/getUserID"]))):console.log("nil session record from sever side either!");case 10:"Login"===t.name||X.getters["users/getUserID"]?r():(console.log("No userID in both server and vuex"),r("/login"));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var ge=pe,he=n("f309");r["a"].use(he["a"]);var me=new he["a"]({});r["a"].config.productionTip=!1,new r["a"]({router:ge,store:X,vuetify:me,render:function(e){return e(f)}}).$mount("#app")}});
//# sourceMappingURL=app.3840fc21.js.map